<header>
    <nav>
        <ul>
            <li>
                <a (click)="abrirConta()">
                    <svg xmlns="http://www.w3.org/2000/svg" width="27" height="27" viewBox="0 0 24 24" fill="none"
                        stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        class="lucide lucide-circle-user-round-icon lucide-circle-user-round">
                        <path d="M18 20a6 6 0 0 0-12 0" />
                        <circle cx="12" cy="10" r="4" />
                        <circle cx="12" cy="12" r="10" />
                    </svg>
                    Minha Conta
                </a>
            </li>
            <li>
                <a (click)="abrirModalCarrinho()">
                    <svg xmlns="http://www.w3.org/2000/svg" width="27" height="27" viewBox="0 0 24 24" fill="none"
                        stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        class="lucide lucide-shopping-cart-icon lucide-shopping-cart">
                        <circle cx="8" cy="21" r="1" />
                        <circle cx="19" cy="21" r="1" />
                        <path d="M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12" />
                    </svg>
                    Carrinho
                    <span class="badge" *ngIf="carrinho.length > 0">{{ carrinho.length }}</span>
                </a>
            </li>
            <li>
                <a (click)="abrirModalFavoritos()">
                    <svg xmlns="http://www.w3.org/2000/svg" width="27" height="27" viewBox="0 0 24 24" fill="none"
                        stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        class="lucide lucide-heart-icon lucide-heart">
                        <path
                            d="M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5" />
                    </svg>
                    Favoritos
                    <span class="badge" *ngIf="favoritos.length > 0">{{ favoritos.length }}</span>
                </a>
            </li>
            <li>
                <a (click)="AbrirConfig()">
                    <svg xmlns="http://www.w3.org/2000/svg" width="27" height="27" viewBox="0 0 24 24" fill="none"
                        stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        class="lucide lucide-settings-icon lucide-settings">
                        <path
                            d="M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915" />
                        <circle cx="12" cy="12" r="3" />
                    </svg>
                    Configurações
                </a>
            </li>
            <li>
                <a style="color: var(--laranja-vermelho);" (click)="logout()">
                    <svg xmlns="http://www.w3.org/2000/svg" width="27" height="27" viewBox="0 0 24 24" fill="none"
                        stroke="#f24405" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        class="lucide lucide-log-out-icon lucide-log-out">
                        <path d="m16 17 5-5-5-5" />
                        <path d="M21 12H9" />
                        <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4" />
                    </svg>
                    Sair
                </a>
            </li>
        </ul>
    </nav>
</header>

<section class="CarrosseImagem">
    <div class="carrossel-container">
        <img [src]="imagens[imagemAtual]" class="carrossel-img" alt="Carrossel">
    </div>
    <div class="carrossel-indicadores">
    </div>
</section>
<main>
    <div class="alinhamentoCards">
        <aside (click)="filtrarProdutos('Alimentos')">
            <img src="images.png">
            <h2> Alimentos </h2>
        </aside>
        <aside (click)="filtrarProdutos('Eletronicos')">
            <img src="eletro.png">
            <h2> Eletrônicos </h2>
        </aside>
        <aside (click)="filtrarProdutos('Roupas')">
            <img src="shirt.png">
            <h2> Roupas </h2>
        </aside>
        <aside (click)="filtrarProdutos('Pet-Shop')">
            <img src="pet.png">
            <h2> Pet-Shop </h2>
        </aside>
        <aside (click)="filtrarProdutos('Decoracao')">
            <img src="decor.png">
            <h2> Decoração </h2>
        </aside>
        <aside (click)="filtrarProdutos('none')">
            <img src="filter.png">
            <h2> Redefinir filtro </h2>
        </aside>
    </div>
    <section class="Produtos">
        <h3> Produtos </h3>
        <div class="product-grid">
            <div class="product-card" *ngFor="let produto of produtosFiltrados.length ? produtosFiltrados : produtos">
                <div class="alinahemntoIV">
                    <img [src]="produto.Imagem" alt="Produto">
                    <div class="product-info">
                        <h3>{{ produto.Nome }}</h3>
                        <p class="desc">{{ produto.Descricao }}</p>
                        <p class="price">{{ produto.Preco | currency:'BRL'}}</p>

                    </div>
                </div>
                <div class="alinahemnto">
                    <button class="buttonC" (click)="adicionarAoCarrinho(produto)">Adicionar ao <br> carrinho</button>
                    <a [href]="produto.Telefone"><svg xmlns="http://www.w3.org/2000/svg" width="50" height="50"
                            viewBox="0 0 24 24" fill="none" stroke="#00ff33" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round" class="lucide lucide-smartphone-icon lucide-smartphone">
                            <rect width="14" height="20" x="5" y="2" rx="2" ry="2" />
                            <path d="M12 18h.01" />
                        </svg>
                    </a>
                    <svg *ngIf="!isFavorite(produto)" xmlns="http://www.w3.org/2000/svg"
                        (click)="toggleFavorite(produto)" width="50" height="50" viewBox="0 0 24 24" fill="none"
                        stroke="rgba(37, 99, 235)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        class="lucide lucide-heart-icon lucide-heart">
                        <path
                            d="M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5" />
                    </svg>
                    <svg *ngIf="isFavorite(produto)" xmlns="http://www.w3.org/2000/svg"
                        (click)="toggleFavorite(produto)" width="50" height="50" viewBox="0 0 24 24" fill="red"
                        stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        class="lucide lucide-heart-icon lucide-heart">
                        <path
                            d="M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5" />
                    </svg>

                </div>
            </div>
        </div>
    </section>
</main>

<footer>
    <aside>
        <h4> Sempre oferecemos <br> qualidade e segurança </h4>
        <div class="carousel">
            <div class="group">
                <div class="card">
                    <img src="CardPag.jpeg">
                </div>
                <div class="card">
                    <img src="CardRap.jpg">
                </div>
                <div class="card">
                    <img src="CardConf.jpeg">
                </div>
                <div class="card">
                    <img src="CardMod.jpeg">
                </div>
                <div class="card">
                    <img src="CardVar.jpeg">
                </div>
                <div class="card">
                    <img src="CardConversa.jpeg">
                </div>
            </div>
        </div>
    </aside>
    <p>Desenvolvido por Matheus</p>
    <p>Todos os direitos reservados - QuickStore 2025</p>
</footer>

<div *ngIf="modalConta" class="modal-overlay">
    <div class="modal-container">
        <h2>Configurações do Perfil</h2>
        <div class="profile-pic-container">
            <img [src]="avatarUrl  || 'man.png'" alt="Foto de Perfil" class="profile-pic">
            <label for="profileImageInput" class="btn-upload">Alterar Foto</label>
            <input type="file" id="profileImageInput" (change)="onFileSelected($event)">
        </div>
        <div class="form-group">
            <label for="name">Nome</label>
            <input name="name" type="text" [(ngModel)]="nomeUsuario" placeholder="Seu nome">
        </div>
        <div class="form-group">
            <label for="email">Trocar e-mail: </label>
            <input name="email" type="email" [readonly]="!editEmail" [(ngModel)]="email"
                placeholder="Digite seu E-mail:" (dblclick)="habilitarEdicao('email')">
        </div>
        <div class="form-group">
            <label for="email">Troque sua senha:</label>
            <input name="password" type="password" [readonly]="!editPassword" [(ngModel)]="password"
                placeholder="Digite sua Senha:" (dblclick)="habilitarEdicao('password')">
        </div>
        <div class="form-group">
            <label for="email">Confirme sua senha:</label>
            <input name="Cpassword" type="password" [readonly]="!editCpassword" [(ngModel)]="Cpassword"
                placeholder="Confirme sua senha:" (dblclick)="habilitarEdicao('Cpassword')">
        </div>
        <div class="modal-actions">
            <button class="btn-cancel" (click)="FecharConta()">Cancelar</button>
            <button class="btn-save" (click)="salvarConfig()">Salvar</button>
        </div>
    </div>
</div>

<div *ngIf="modalFavoritos" class="modal-overlayFav">
    <div class="modal-containerFav">
        <h2>Favoritos</h2>
        <div *ngIf="favoritos.length > 0" class="product-grid">
            <div *ngFor="let produto of favoritos" class="product-cardFav">
                <img [src]="produto.Imagem" alt="Produto">
                <div class="product-infoFav">
                    <h3>{{ produto.Nome }}</h3>
                    <p class="price">{{ produto.Preco | currency:'BRL'}}</p>
                    <p class="desc">{{ produto.Descricao }}</p>
                    <button class="stop" (click)="removerFavorito(produto)"> Remover </button>
                </div>
            </div>

        </div>
        <div class="alinahemntoII">
            <button class="cancel" (click)="fecharModalFavoritos()"> Fechar</button>
        </div>
        <ng-template #vazio>
            <p> Nenhum produto favoritado </p>
        </ng-template>
    </div>

</div>

<div *ngIf="modalConfig" class="modal-overlayFav">
    <div class="modal-containerFav">
        <h2>Configurações</h2>
        <div class="alinahemntoIII">
            <section class="enderecos-lista">
                <h3>Meus Endereços</h3>
                <div *ngIf="enderecos.length === 0" class="endereco-vazio">
                    <p>Nenhum endereço cadastrado.</p>
                </div>
                <div *ngFor="let endereco of enderecos" class="endereco-card">
                    <p><strong>Rua:</strong> {{ endereco.rua }}, {{ endereco.numero }}</p>
                    <p><strong>Bairro:</strong> {{ endereco.bairro }}</p>
                    <p><strong>Cidade:</strong> {{ endereco.cidade }} - {{ endereco.estado }}</p>
                    <p><strong>CEP:</strong> {{ endereco.cep }}</p>
                    <p><strong>Complemento:</strong> {{ endereco.complemento }}</p>
                    <div class="endereco-actions">
                        <button class="Add" (click)="editarEndereco(endereco)">Editar</button>
                        <button class="cancel" (click)="removerEndereco(endereco.id)">Remover</button>
                    </div>
                </div>
                <div class="endereco-actions">
                    <button class="Add" (click)="abrirModalEndereco()">Adicionar Endereço</button>
                    <button class="btn-cancel" (click)="FecharConfig()">Fechar</button>
                </div>
            </section>
            <section class="Pagamentos">
                <h5> Métodos de Pagamentos </h5>
                <p> Pagamento somente pelo PIX </p>
            </section>
        </div>
    </div>
    <div *ngIf="modalEnderecos" class="modal-overlay">
        <div class="modal-container">
            <h2>Adicionar Endereço</h2>
            <form>
                <input type="text" [(ngModel)]="Endereco.rua" placeholder="Rua" name="rua">
                <input type="text" [(ngModel)]="Endereco.numero" placeholder="Número" name="numero">
                <input type="text" [(ngModel)]="Endereco.complemento" placeholder="Complemento" name="complemento">
                <input type="text" [(ngModel)]="Endereco.bairro" placeholder="Bairro" name="bairro">
                <input type="text" [(ngModel)]="Endereco.cidade" placeholder="Cidade" name="cidade">
                <input type="text" [(ngModel)]="Endereco.cep" placeholder="CEP" name="cep">
                <select [(ngModel)]="Endereco.estado" name="estado">
                    <option value="">Estado</option>
                    <option value="AC">AC</option>
                    <option value="AL">AL</option>
                    <option value="AP">AP</option>
                    <option value="AM">AM</option>
                    <option value="BA">BA</option>
                    <option value="CE">CE</option>
                    <option value="ES">ES</option>
                    <option value="GO">GO</option>
                    <option value="MA">MA</option>
                    <option value="MT">MT</option>
                    <option value="MS">MS</option>
                    <option value="MG">MG</option>
                    <option value="PA">PA</option>
                    <option value="PB">PB</option>
                    <option value="PR">PR</option>
                    <option value="PE">PE</option>
                    <option value="PI">PI</option>
                    <option value="RJ">RJ</option>
                    <option value="RN">RN</option>
                    <option value="RS">RS</option>
                    <option value="RO">RO</option>
                    <option value="RR">RR</option>
                    <option value="SC">SC</option>
                    <option value="SP">SP</option>
                    <option value="SE">SE</option>
                    <option value="TO">TO</option>
                </select>
            </form>
            <div class="alinahemntoII">
                <button class="cancel" (click)="fecharModalEndereco()">Cancelar</button>
                <button class="btn-save" (click)="salvarEndereco()">Salvar</button>
            </div>
        </div>
    </div>
</div>
<div *ngIf="modalCarrinho" class="modal-overlayFav">
    <div class="modal-containerConf">
        <h2>Carrinho</h2>
        <div *ngIf="carrinho.length > 0" class="product-grid">
            <div *ngFor="let produto of carrinhoAgrupado" class="product-cardFav">
                <img [src]="produto.Imagem" alt="Produto">
                <div class="product-infoFav">
                    <h3>{{ produto.Nome }}</h3>
                    <p class="desc">{{ produto.Descricao }}</p>
                    <p class="price">{{ produto.Preco | currency:'BRL'}}</p>
                    <p class="quantidade"> Quantidade: {{ produto.quantidade }} </p>
                    <button class="stop" (click)="removerDoCarrinho(produto)"> Remover </button>
                </div>
            </div>

        </div>
        <div class="alinahemntoII">
            <button class="cancel" (click)="fecharModalCarrinho()"> Fechar</button>
            <button class="stop" (click)="finalizarCompra()"> Finalizar Pedido</button>
        </div>
        <ng-template #vazio>
            <p> Nenhum produto no carrinho </p>
        </ng-template>
    </div>
</div>

<div *ngIf="semResultados" class="modal-overlay">
    <div class="modal-container">
        <h2>Sem Produtos</h2>
        <p>Ainda não há produtos disponíveis para esta categoria, por favor tente novamente mais tarde</p>
        <div class="alinhamentoII">
            <button class="cancel" (click)="fecharModal()">Fechar</button>
        </div>
    </div>